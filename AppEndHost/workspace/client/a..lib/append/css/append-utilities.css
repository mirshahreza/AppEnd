/* ====================================
   UTILITY CLASSES
   Reusable utility classes for common styling needs
   ==================================== */

.text-blue{ color: #3b82f6 !important; }
.text-green{ color: #10b981 !important; }
.text-red{ color: #ef4444 !important; }
.text-pink{ color: #ec4899 !important; }
.text-navy{ color: #1e3a8a !important; }
.text-indigo{ color: #6366f1 !important; }


/* Color Utilities */
.text-primary { color: var(--bs-primary) !important; }
.text-muted { color: var(--color-text-muted) !important; }
.text-success { color: var(--color-success) !important; }
.text-danger { color: var(--color-danger) !important; }
.text-warning { color: var(--color-warning) !important; }
.text-inverse { color: var(--color-text-inverse) !important; }

/* Background Utilities */
.bg-primary { background-color: var(--bs-primary) !important; color: var(--color-text-inverse) !important; }
.bg-primary-subtle { background-color: var(--bs-primary-subtle-light) !important; }
.bg-primary-subtle-light { background-color: var(--bs-primary-subtle-light) !important; }
.bg-success { background-color: var(--color-success) !important; color: var(--color-text-inverse) !important; }
.bg-success-subtle { background-color: var(--color-success-subtle) !important; }
.bg-danger { background-color: var(--color-danger) !important; color: var(--color-text-inverse) !important; }
.bg-danger-subtle { background-color: var(--color-danger-subtle) !important; }
.bg-warning { background-color: var(--color-warning) !important; color: var(--color-text-inverse) !important; }
.bg-warning-subtle { background-color: var(--color-warning-subtle) !important; }
.bg-body { background-color: var(--color-bg) !important; }
.bg-body-subtle { background-color: var(--color-bg-subtle) !important; }
.bg-elevated { background-color: var(--color-bg-elevated) !important; }
.bg-neutral-header { background-color: var(--color-bg-subtle) !important; }
.bg-page { background-color: var(--color-bg); }
.bg-content { background-image: var(--bg-content); background-size: cover; }
.bg-login { background-image: var(--bg-login); background-size: cover; }
.bg-content-color { background-color: var(--theme-color); }
.bg-frame { background-color: var(--bg-frame-color); }

/* Border Utilities */
.border-primary { border-color: var(--color-border) !important; }
.border-accent { border-color: var(--color-accent) !important; }

/* Button Utilities */
.btn-primary {
    background-color: var(--color-accent) !important;
    color: var(--color-text-inverse) !important;
    border-color: var(--color-accent) !important;
}
.btn-primary:hover { background-color: var(--color-accent-hover) !important; }
.btn-xs { font-size: 0.65rem !important; }

/* Font Size Utilities */
.fs-1d1 { font-size: 1.1em !important; }
.fs-1d2 { font-size: 1.2em !important; }
.fs-1d3 { font-size: 1.3em !important; }
.fs-1d4 { font-size: 1.4em !important; }
.fs-1d5 { font-size: 1.5em !important; }
.fs-d9 { font-size: .9em !important; }
.fs-d8 { font-size: .8em !important; }
.fs-d7 { font-size: .7em !important; }
.fs-d6 { font-size: .6em !important; }
.fs-d5 { font-size: .5em !important; }
.fs-d4 { font-size: .4em !important; }
.fs-d3 { font-size: .3em !important; }
.fs-d2 { font-size: .2em !important; }

/* Hover Effects */
.hover-primary:hover {
    color: var(--color-accent) !important;
    background: rgba(var(--bs-primary-rgb), 0.06) !important;
}
.text-hover-danger:hover { color: var(--color-danger) !important; }
.text-hover-primary:hover { color: var(--color-accent) !important; }
.text-hover-success:hover { color: var(--color-success) !important; }
.text-hover-dark:hover { color: var(--fluent-neutral-900) !important; }

.text-hover-underline:hover { text-decoration:underline !important; }



.bg-hover { opacity: 0.6; }
.bg-hover:hover {
    background-color: var(--color-accent-subtle) !important;
    color: var(--color-accent) !important;
    opacity: 0.99;
}
/* Removed .bg-hover-light:hover override - now handled in append-themes.css */
.bg-hover-primary:hover { background-color: var(--fluent-primary-100) !important; }
.bg-hover-white:hover { background-color: white !important; }

/* Layout Utilities */
.scrollable {
    height: 100%;
    overflow-y: auto;
    overflow-x: hidden;
}

.collapse {
    display: none !important;
}

/* Ensure dropdowns render above scrollable containers and adjacent content */
.dropdown-menu {
    z-index: 2000 !important;
}

.fill {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    top: 0;
}

.vertical-center {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateX(-50%) translateY(-50%);
}

/* Interaction Utilities */
.pointer { cursor: pointer; }
.cursor-pointer { cursor: pointer; }

.disabled {
    cursor: auto !important;
    background-color: var(--fluent-neutral-200) !important;
}

.editmode {
    outline: 2px dashed rgba(0, 0, 0, 0.2) !important;
}

/* Effect Utilities */
.shadow5 {
    text-shadow: 0px 0px 10px rgba(100, 100, 100, 0.75);
}

.ico-shadow {
    box-shadow: rgba(50, 50, 93, 0.6) 0px 2px 5px -1px, rgba(0, 0, 0, 0.2) 0px 1px 5px -1px;
}

.hover-slow {
    transition: all 0.5s;
}

/* Gradient Text */
.ae-text-gradient-primary {
    background: linear-gradient(135deg, #6366f1 0%, #a78bfa 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.ae-text-gradient-accent {
    background: linear-gradient(135deg, #ff8a4c 0%, #ff6b9d 50%, #c06bf1 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

/* Responsive Utilities */
@media (min-width: 768px) {
    .content-bg {
        box-shadow: rgba(50, 50, 93, 0.6) 0px 2px 5px -1px, rgba(0, 0, 0, 0.2) 0px 1px 5px -1px;
    }
}

/* ====================================
   TOOLBAR UNIFICATION
   Make all header/toolbar areas identical in appearance and behavior
   Targets: .card-header, .designer-header, .host-toolbar, .ae-toolbar, .file-header
   ==================================== */

/* Unified toolbar container */
.card-header,
.designer-header,
.host-toolbar,
.ae-toolbar,
.file-header,
.card-header.bg-frame,
.designer-header.p-2,
.card-footer {
    background-color: var(--bg-toolbar-color) !important;
    color: var(--color-text) !important;
    min-height: 46px; /* less "fat" */
    padding: .35rem .75rem !important;
    display: flex !important;
    align-items: center !important;
    gap: .5rem !important;
    box-sizing: border-box !important;
    border-bottom: 1px solid rgba(var(--bs-primary-rgb), 0.06) !important;
}

/* Fix for collapsed card-headers (like advanced search) */
.card-header.collapse:not(.show) {
    display: none !important;
}

/* Ensure internal hstack / flex rows span full width */
.card-header .hstack,
.designer-header .hstack,
.host-toolbar .hstack,
.file-header .hstack,
.card-footer .hstack {
    width: 100%;
    display: flex;
    align-items: center;
}

/* Toolbar buttons unified appearance */
/* Exclude .input-group .btn to prevent breaking input-group styling */
.card-header .btn:not(.input-group .btn):not(.input-group > .btn-group .btn),
.card-header .btn-link:not(.input-group .btn-link),
.designer-header .btn:not(.input-group .btn):not(.input-group > .btn-group .btn),
.designer-header .btn-link:not(.input-group .btn-link),
.host-toolbar-btn,
.host-toolbar .btn:not(.input-group .btn):not(.input-group > .btn-group .btn),
.ae-toolbar .btn:not(.input-group .btn):not(.input-group > .btn-group .btn),
.file-header .btn:not(.input-group .btn):not(.input-group > .btn-group .btn),
.card-footer .btn:not(.input-group .btn):not(.input-group > .btn-group .btn):not(.btn-primary):not(.btn-secondary):not(.btn-outline-primary):not(.btn-outline-secondary),
.btn-group .btn:not(.input-group .btn):not(.input-group > .btn-group .btn):not(.input-group .btn-group .btn):not(.btn-primary):not(.btn-secondary):not(.btn-outline-primary):not(.btn-outline-secondary) {
    padding: .32rem .5rem !important;
    font-size: .92rem !important;
    border-radius: .375rem !important;
    background: transparent !important;
    border: 0 !important;
    display: inline-flex !important;
    align-items: center !important;
    gap: .4rem !important;
    box-shadow: none !important;
    transform: none !important;
    transition: background-color .12s ease, color .12s ease !important;

    /* default toolbar action color follows current theme (strongest accent) */
    color: var(--bs-primary) !important;
}

/* Ensure icons follow the same default theme color (unless they explicitly use text-success/text-danger/...) */
.card-header .btn:not(.input-group .btn) i,
.card-header .btn-link:not(.input-group .btn-link) i,
.designer-header .btn:not(.input-group .btn) i,
.designer-header .btn-link:not(.input-group .btn-link) i,
.host-toolbar-btn i,
.host-toolbar .btn:not(.input-group .btn) i,
.ae-toolbar .btn:not(.input-group .btn) i,
.file-header .btn:not(.input-group .btn) i,
.card-footer .btn:not(.input-group .btn) i {
    color: currentColor !important;
}

/* Keep toolbar labels/buttons/titles using theme primary (strongest) */
.card-header .btn:not(.input-group .btn) span,
.card-header .btn-link:not(.input-group .btn-link) span,
.card-header .fw-bold,
.designer-header .fw-bold,
.host-toolbar .fw-bold,
.file-header .fw-bold,
.card-footer .fw-bold {
    color: var(--bs-primary) !important;
}

/* Exception: if an element explicitly declares a semantic text color, respect it */
.card-header .btn:not(.input-group .btn).text-success,
.card-header .btn-link:not(.input-group .btn-link).text-success,
.designer-header .btn:not(.input-group .btn).text-success,
.designer-header .btn-link:not(.input-group .btn-link).text-success,
.host-toolbar-btn.text-success,
.host-toolbar .btn:not(.input-group .btn).text-success,
.ae-toolbar .btn:not(.input-group .btn).text-success,
.file-header .btn:not(.input-group .btn).text-success,
.card-footer .btn:not(.input-group .btn).text-success {
    color: var(--color-success) !important;
}
.card-header .btn:not(.input-group .btn).text-danger,
.card-header .btn-link:not(.input-group .btn-link).text-danger,
.designer-header .btn:not(.input-group .btn).text-danger,
.designer-header .btn-link:not(.input-group .btn-link).text-danger,
.host-toolbar-btn.text-danger,
.host-toolbar .btn:not(.input-group .btn).text-danger,
.ae-toolbar .btn:not(.input-group .btn).text-danger,
.file-header .btn:not(.input-group .btn).text-danger,
.card-footer .btn:not(.input-group .btn).text-danger {
    color: var(--color-danger) !important;
}
.card-header .btn:not(.input-group .btn).text-warning,
.card-header .btn-link:not(.input-group .btn-link).text-warning,
.designer-header .btn:not(.input-group .btn).text-warning,
.designer-header .btn-link:not(.input-group .btn-link).text-warning,
.host-toolbar-btn.text-warning,
.host-toolbar .btn:not(.input-group .btn).text-warning,
.ae-toolbar .btn:not(.input-group .btn).text-warning,
.file-header .btn:not(.input-group .btn).text-warning,
.card-footer .btn:not(.input-group .btn).text-warning {
    color: var(--color-warning) !important;
}

/* Hover / focus states — keep subtle; NO bold, NO icon color change */
.card-header .btn:not(.input-group .btn):not(.btn-primary):not(.btn-secondary):not(.btn-outline-primary):not(.btn-outline-secondary):hover,
.card-header .btn:not(.input-group .btn):not(.btn-primary):not(.btn-secondary):not(.btn-outline-primary):not(.btn-outline-secondary):focus,
.designer-header .btn:not(.input-group .btn):hover,
.designer-header .btn:not(.input-group .btn):focus,
.host-toolbar-btn:hover,
.host-toolbar-btn:focus,
.ae-toolbar .btn:not(.input-group .btn):hover,
.ae-toolbar .btn:not(.input-group .btn):focus,
.file-header .btn:not(.input-group .btn):hover,
.file-header .btn:not(.input-group .btn):focus,
.card-footer .btn:not(.input-group .btn):not(.btn-primary):not(.btn-secondary):not(.btn-outline-primary):not(.btn-outline-secondary):hover,
.card-footer .btn:not(.input-group .btn):not(.btn-primary):not(.btn-secondary):not(.btn-outline-primary):not(.btn-outline-secondary):focus,
.btn-group .btn:not(.input-group .btn):not(.btn-primary):not(.btn-secondary):not(.btn-outline-primary):not(.btn-outline-secondary):hover,
.btn-group .btn:not(.input-group .btn):not(.btn-primary):not(.btn-secondary):not(.btn-outline-primary):not(.btn-outline-secondary):focus {
    background-color: rgba(var(--bs-primary-rgb), 0.06) !important;
    /* do not override color */
    box-shadow: none !important;
    transform: none !important;
}

/* Prevent icons inside toolbar buttons from changing on hover/focus */
.card-header .btn:not(.input-group .btn):not(.btn-primary):not(.btn-secondary):not(.btn-outline-primary):not(.btn-outline-secondary):hover i,
.card-header .btn:not(.input-group .btn):not(.btn-primary):not(.btn-secondary):not(.btn-outline-primary):not(.btn-outline-secondary):focus i,
.card-header .btn-link:not(.input-group .btn-link):hover i,
.card-header .btn-link:not(.input-group .btn-link):focus i,
.designer-header .btn:not(.input-group .btn):hover i,
.designer-header .btn:not(.input-group .btn):focus i,
.host-toolbar .btn:not(.input-group .btn):hover i,
.host-toolbar .btn:not(.input-group .btn):focus i,
.host-toolbar-btn:hover i,
.host-toolbar-btn:focus i,
.ae-toolbar .btn:not(.input-group .btn):hover i,
.ae-toolbar .btn:not(.input-group .btn):focus i,
.file-header .btn:not(.input-group .btn):hover i,
.file-header .btn:not(.input-group .btn):focus i,
.card-footer .btn:not(.input-group .btn):not(.btn-primary):not(.btn-secondary):not(.btn-outline-primary):not(.btn-outline-secondary):hover i,
.card-footer .btn:not(.input-group .btn):not(.btn-primary):not(.btn-secondary):not(.btn-outline-primary):not(.btn-outline-secondary):focus i,
.btn-group .btn:not(.input-group .btn):not(.btn-primary):not(.btn-secondary):not(.btn-outline-primary):not(.btn-outline-secondary):hover i,
.btn-group .btn:not(.input-group .btn):not(.btn-primary):not(.btn-secondary):not(.btn-outline-primary):not(.btn-outline-secondary):focus i {
    /* do not override color */
    text-shadow: none !important;
    filter: none !important;
}

/* ==================== SPECIFIC BUTTON STYLES ==================== */

/* Primary Buttons */
.card-header .btn.btn-primary:not(.input-group .btn), .card-footer .btn.btn-primary:not(.input-group .btn), .btn-group .btn.btn-primary:not(.input-group .btn),
.designer-header .btn.btn-primary:not(.input-group .btn), .host-toolbar .btn.btn-primary:not(.input-group .btn), .ae-toolbar .btn.btn-primary:not(.input-group .btn), .file-header .btn.btn-primary:not(.input-group .btn) {
    background: linear-gradient(145deg, var(--bs-primary) 0%, var(--bs-primary-dark) 100%) !important;
    border: none !important;
    color: white !important;
    box-shadow: 0 2px 5px rgba(var(--bs-primary-rgb), 0.3) !important;
    transition: all 0.2s ease !important;
    padding: 0.5rem 1rem !important;
    min-height: 38px !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: flex-start !important;
    text-align: start !important;
}

.card-header .btn.btn-primary:not(.input-group .btn):hover, .card-footer .btn.btn-primary:not(.input-group .btn):hover, .btn-group .btn.btn-primary:not(.input-group .btn):hover,
.designer-header .btn.btn-primary:not(.input-group .btn):hover, .host-toolbar .btn.btn-primary:not(.input-group .btn):hover, .ae-toolbar .btn.btn-primary:not(.input-group .btn):hover, .file-header .btn.btn-primary:not(.input-group .btn):hover {
    box-shadow: 0 4px 12px rgba(var(--bs-primary-rgb), 0.5) !important;
    filter: brightness(1.05);
}

/* Secondary Buttons */
.card-header .btn.btn-secondary:not(.input-group .btn), .card-footer .btn.btn-secondary:not(.input-group .btn), .btn-group .btn.btn-secondary:not(.input-group .btn),
.designer-header .btn.btn-secondary:not(.input-group .btn), .host-toolbar .btn.btn-secondary:not(.input-group .btn), .ae-toolbar .btn.btn-secondary:not(.input-group .btn), .file-header .btn.btn-secondary:not(.input-group .btn) {
    background: linear-gradient(145deg, #6c757d 0%, #5a6268 100%) !important;
    border: none !important;
    color: white !important;
    box-shadow: 0 2px 5px rgba(108, 117, 125, 0.3) !important;
    transition: all 0.2s ease !important;
    padding: 0.5rem 1rem !important;
    min-height: 38px !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: flex-start !important;
    text-align: start !important;
}

.card-header .btn.btn-secondary:not(.input-group .btn):hover, .card-footer .btn.btn-secondary:not(.input-group .btn):hover, .btn-group .btn.btn-secondary:not(.input-group .btn):hover,
.designer-header .btn.btn-secondary:not(.input-group .btn):hover, .host-toolbar .btn.btn-secondary:not(.input-group .btn):hover, .ae-toolbar .btn.btn-secondary:not(.input-group .btn):hover, .file-header .btn.btn-secondary:not(.input-group .btn):hover {
    box-shadow: 0 4px 12px rgba(108, 117, 125, 0.5) !important;
    filter: brightness(1.05);
}

/* Outline Secondary Buttons (Cancel) */
.card-header .btn.btn-outline-secondary:not(.input-group .btn), .card-footer .btn.btn-outline-secondary:not(.input-group .btn), .btn-group .btn.btn-outline-secondary:not(.input-group .btn),
.designer-header .btn.btn-outline-secondary:not(.input-group .btn), .host-toolbar .btn.btn-outline-secondary:not(.input-group .btn), .ae-toolbar .btn.btn-outline-secondary:not(.input-group .btn), .file-header .btn.btn-outline-secondary:not(.input-group .btn) {
    background-color: white !important;
    border: 1px solid #e2e8f0 !important;
    color: #64748b !important;
    box-shadow: 0 1px 2px rgba(0,0,0,0.05) !important;
    transition: all 0.2s ease !important;
    padding: 0.5rem 1rem !important;
    min-height: 38px !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: flex-start !important;
    text-align: start !important;
}

.card-header .btn.btn-outline-secondary:not(.input-group .btn):hover, .card-footer .btn.btn-outline-secondary:not(.input-group .btn):hover, .btn-group .btn.btn-outline-secondary:not(.input-group .btn):hover,
.designer-header .btn.btn-outline-secondary:not(.input-group .btn):hover, .host-toolbar .btn.btn-outline-secondary:not(.input-group .btn):hover, .ae-toolbar .btn.btn-outline-secondary:not(.input-group .btn):hover, .file-header .btn.btn-outline-secondary:not(.input-group .btn):hover {
    background-color: #f1f5f9 !important;
    border-color: #cbd5e1 !important;
    color: #1e293b !important;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08) !important;
}
    border-color: #cbd5e1 !important;
    color: #1e293b !important;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08) !important;
}

/* Outline Primary Buttons */
.card-header .btn.btn-outline-primary:not(.input-group .btn), .card-footer .btn.btn-outline-primary:not(.input-group .btn), .btn-group .btn.btn-outline-primary:not(.input-group .btn),
.designer-header .btn.btn-outline-primary:not(.input-group .btn), .host-toolbar .btn.btn-outline-primary:not(.input-group .btn), .ae-toolbar .btn.btn-outline-primary:not(.input-group .btn), .file-header .btn.btn-outline-primary:not(.input-group .btn) {
    background-color: white !important;
    border: 1px solid var(--bs-primary) !important;
    color: var(--bs-primary) !important;
    box-shadow: 0 1px 2px rgba(var(--bs-primary-rgb), 0.1) !important;
}

.card-header .btn.btn-outline-primary:not(.input-group .btn):hover, .card-footer .btn.btn-outline-primary:not(.input-group .btn):hover, .btn-group .btn.btn-outline-primary:not(.input-group .btn):hover,
.designer-header .btn.btn-outline-primary:not(.input-group .btn):hover, .host-toolbar .btn.btn-outline-primary:not(.input-group .btn):hover, .ae-toolbar .btn.btn-outline-primary:not(.input-group .btn):hover, .file-header .btn.btn-outline-primary:not(.input-group .btn):hover {
    background-color: var(--bs-primary) !important;
    color: white !important;
    box-shadow: 0 4px 10px rgba(var(--bs-primary-rgb), 0.3) !important;
}

/* Responsive: tighten further on small screens */
@media (max-width: 767.98px) {
    .card-header,
    .designer-header,
    .host-toolbar,
    .file-header,
    .card-footer {
        padding: .30rem .5rem !important;
        min-height: 42px;
    }
    .card-header .btn:not(.input-group .btn),
    .designer-header .btn:not(.input-group .btn),
    .host-toolbar-btn,
    .card-footer .btn:not(.input-group .btn) {
        padding: .26rem .4rem !important;
        font-size: .88rem !important;
    }
}

/* Explicitly remove any pseudo-element tooltips that were injected previously */
.card-header .btn:not(.input-group .btn)::after,
.card-header .btn-link:not(.input-group .btn-link)::after,
.designer-header .btn:not(.input-group .btn)::after,
.host-toolbar-btn::after,
.ae-toolbar .btn:not(.input-group .btn)::after,
.file-header .btn:not(.input-group .btn)::after,
.card-footer .btn:not(.input-group .btn)::after {
    display: none !important;
    content: none !important;
}

/* ====================================
   RESTORE & BEAUTIFY BOOTSTRAP BUTTONS IN TOOLBARS
   Override the toolbar unification rules for standard Bootstrap buttons
   ==================================== */

/* Common Styles for Toolbar Buttons */
.card-header .btn:not(.input-group .btn), .card-footer .btn:not(.input-group .btn), .btn-group .btn:not(.input-group .btn),
.designer-header .btn:not(.input-group .btn), .host-toolbar .btn:not(.input-group .btn), .ae-toolbar .btn:not(.input-group .btn), .file-header .btn:not(.input-group .btn) {
    border-radius: 6px !important; /* Reduced from 8px to 6px */
    font-weight: 500 !important;
    letter-spacing: 0.3px;
    padding: 0.4rem 1rem !important; /* Slightly more padding */
}

/* Primary Buttons */
.card-header .btn.btn-primary:not(.input-group .btn), .card-footer .btn.btn-primary:not(.input-group .btn), .btn-group .btn.btn-primary:not(.input-group .btn),
.designer-header .btn.btn-primary:not(.input-group .btn), .host-toolbar .btn.btn-primary:not(.input-group .btn), .ae-toolbar .btn.btn-primary:not(.input-group .btn), .file-header .btn.btn-primary:not(.input-group .btn) {
    background: linear-gradient(145deg, var(--bs-primary) 0%, var(--bs-primary-dark) 100%) !important;
    border: none !important;
    color: white !important;
    box-shadow: 0 2px 5px rgba(var(--bs-primary-rgb), 0.3) !important;
    transition: all 0.2s ease !important;
}

.card-header .btn.btn-primary:not(.input-group .btn):hover, .card-footer .btn.btn-primary:not(.input-group .btn):hover, .btn-group .btn.btn-primary:not(.input-group .btn):hover,
.designer-header .btn.btn-primary:not(.input-group .btn):hover, .host-toolbar .btn.btn-primary:not(.input-group .btn):hover, .ae-toolbar .btn.btn-primary:not(.input-group .btn):hover, .file-header .btn.btn-primary:not(.input-group .btn):hover {
    /* transform: translateY(-1px) !important; Removed movement */
    box-shadow: 0 4px 12px rgba(var(--bs-primary-rgb), 0.5) !important; /* Enhanced shadow */
    filter: brightness(1.05); /* Slightly reduced brightness increase for softer feel */
}

/* Secondary Buttons */
.card-header .btn.btn-secondary:not(.input-group .btn), .card-footer .btn.btn-secondary:not(.input-group .btn), .btn-group .btn.btn-secondary:not(.input-group .btn),
.designer-header .btn.btn-secondary:not(.input-group .btn), .host-toolbar .btn.btn-secondary:not(.input-group .btn), .ae-toolbar .btn.btn-secondary:not(.input-group .btn), .file-header .btn.btn-secondary:not(.input-group .btn) {
    background: linear-gradient(145deg, var(--bs-secondary) 0%, var(--bs-secondary-dark) 100%) !important;
    border: none !important;
    color: white !important;
    box-shadow: 0 2px 5px rgba(var(--bs-secondary-rgb), 0.3) !important;
}

.card-header .btn.btn-secondary:not(.input-group .btn):hover, .card-footer .btn.btn-secondary:not(.input-group .btn):hover, .btn-group .btn.btn-secondary:not(.input-group .btn):hover,
.designer-header .btn.btn-secondary:not(.input-group .btn):hover, .host-toolbar .btn.btn-secondary:not(.input-group .btn):hover, .ae-toolbar .btn.btn-secondary:not(.input-group .btn):hover, .file-header .btn.btn-secondary:not(.input-group .btn):hover {
    /* transform: translateY(-1px) !important; Removed movement */
    box-shadow: 0 4px 12px rgba(var(--bs-secondary-rgb), 0.5) !important; /* Enhanced shadow */
    filter: brightness(1.05); /* Slightly reduced brightness increase */
}

/* Success Buttons */
.card-header .btn.btn-success:not(.input-group .btn), .card-footer .btn.btn-success:not(.input-group .btn), .btn-group .btn.btn-success:not(.input-group .btn),
.designer-header .btn.btn-success:not(.input-group .btn), .host-toolbar .btn.btn-success:not(.input-group .btn), .ae-toolbar .btn.btn-success:not(.input-group .btn), .file-header .btn.btn-success:not(.input-group .btn) {
    background: linear-gradient(145deg, var(--fluent-success-500) 0%, var(--fluent-success-600) 100%) !important;
    border: none !important;
    color: white !important;
    box-shadow: 0 2px 5px rgba(16, 185, 129, 0.3) !important;
}

.card-header .btn.btn-success:not(.input-group .btn):hover, .card-footer .btn.btn-success:not(.input-group .btn):hover, .btn-group .btn.btn-success:not(.input-group .btn):hover,
.designer-header .btn.btn-success:not(.input-group .btn):hover, .host-toolbar .btn.btn-success:not(.input-group .btn):hover, .ae-toolbar .btn.btn-success:not(.input-group .btn):hover, .file-header .btn.btn-success:not(.input-group .btn):hover {
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.5) !important; /* Enhanced shadow */
    filter: brightness(1.1); /* Increased brightness */
}

/* Danger Buttons */
.card-header .btn.btn-danger:not(.input-group .btn), .card-footer .btn.btn-danger:not(.input-group .btn), .btn-group .btn.btn-danger:not(.input-group .btn),
.designer-header .btn.btn-danger:not(.input-group .btn), .host-toolbar .btn.btn-danger:not(.input-group .btn), .ae-toolbar .btn.btn-danger:not(.input-group .btn), .file-header .btn.btn-danger:not(.input-group .btn) {
    background: linear-gradient(145deg, var(--fluent-danger-500) 0%, var(--fluent-danger-600) 100%) !important;
    border: none !important;
    color: white !important;
    box-shadow: 0 2px 5px rgba(239, 68, 68, 0.3) !important;
}

.card-header .btn.btn-danger:not(.input-group .btn):hover, .card-footer .btn.btn-danger:not(.input-group .btn):hover, .btn-group .btn.btn-danger:not(.input-group .btn):hover,
.designer-header .btn.btn-danger:not(.input-group .btn):hover, .host-toolbar .btn.btn-danger:not(.input-group .btn):hover, .ae-toolbar .btn.btn-danger:not(.input-group .btn):hover, .file-header .btn.btn-danger:not(.input-group .btn):hover {
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.5) !important; /* Enhanced shadow */
    filter: brightness(1.1); /* Increased brightness */
}

/* Warning Buttons */
.card-header .btn.btn-warning:not(.input-group .btn), .card-footer .btn.btn-warning:not(.input-group .btn), .btn-group .btn.btn-warning:not(.input-group .btn),
.designer-header .btn.btn-warning:not(.input-group .btn), .host-toolbar .btn.btn-warning:not(.input-group .btn), .ae-toolbar .btn.btn-warning:not(.input-group .btn), .file-header .btn.btn-warning:not(.input-group .btn) {
    background: linear-gradient(145deg, var(--fluent-warning-400) 0%, var(--fluent-warning-500) 100%) !important;
    border: none !important;
    color: #000 !important;
    box-shadow: 0 2px 5px rgba(245, 158, 11, 0.3) !important;
}

.card-header .btn.btn-warning:not(.input-group .btn):hover, .card-footer .btn.btn-warning:not(.input-group .btn):hover, .btn-group .btn.btn-warning:not(.input-group .btn):hover,
.designer-header .btn.btn-warning:not(.input-group .btn):hover, .host-toolbar .btn.btn-warning:not(.input-group .btn):hover, .ae-toolbar .btn.btn-warning:not(.input-group .btn):hover, .file-header .btn.btn-warning:not(.input-group .btn):hover {
    box-shadow: 0 4px 12px rgba(245, 158, 11, 0.5) !important; /* Enhanced shadow */
    filter: brightness(1.1); /* Increased brightness */
}

/* Outline Secondary Buttons (Cancel) */
.card-header .btn.btn-outline-secondary:not(.input-group .btn), .card-footer .btn.btn-outline-secondary:not(.input-group .btn), .btn-group .btn.btn-outline-secondary:not(.input-group .btn),
.designer-header .btn.btn-outline-secondary:not(.input-group .btn), .host-toolbar .btn.btn-outline-secondary:not(.input-group .btn), .ae-toolbar .btn.btn-outline-secondary:not(.input-group .btn), .file-header .btn.btn-outline-secondary:not(.input-group .btn) {
    background-color: white !important;
    border: 1px solid #e2e8f0 !important;
    color: #64748b !important;
    box-shadow: 0 1px 2px rgba(0,0,0,0.05) !important;
    transition: all 0.2s ease !important;
}

.card-header .btn.btn-outline-secondary:not(.input-group .btn):hover, .card-footer .btn.btn-outline-secondary:not(.input-group .btn):hover, .btn-group .btn.btn-outline-secondary:not(.input-group .btn):hover,
.designer-header .btn.btn-outline-secondary:not(.input-group .btn):hover, .host-toolbar .btn.btn-outline-secondary:not(.input-group .btn):hover, .ae-toolbar .btn.btn-outline-secondary:not(.input-group .btn):hover, .file-header .btn.btn-outline-secondary:not(.input-group .btn):hover {
    background-color: #f1f5f9 !important; /* Slightly darker hover bg */
    border-color: #cbd5e1 !important;
    color: #1e293b !important; /* Darker text */
    box-shadow: 0 2px 8px rgba(0,0,0,0.08) !important; /* Enhanced shadow */
}

/* Outline Primary Buttons */
.card-header .btn.btn-outline-primary:not(.input-group .btn), .card-footer .btn.btn-outline-primary:not(.input-group .btn), .btn-group .btn.btn-outline-primary:not(.input-group .btn),
.designer-header .btn.btn-outline-primary:not(.input-group .btn), .host-toolbar .btn.btn-outline-primary:not(.input-group .btn), .ae-toolbar .btn.btn-outline-primary:not(.input-group .btn), .file-header .btn.btn-outline-primary:not(.input-group .btn) {
    background-color: white !important;
    border: 1px solid var(--bs-primary) !important;
    color: var(--bs-primary) !important;
    box-shadow: 0 1px 2px rgba(var(--bs-primary-rgb), 0.1) !important;
}

.card-header .btn.btn-outline-primary:not(.input-group .btn):hover, .card-footer .btn.btn-outline-primary:not(.input-group .btn):hover, .btn-group .btn.btn-outline-primary:not(.input-group .btn):hover,
.designer-header .btn.btn-outline-primary:not(.input-group .btn):hover, .host-toolbar .btn.btn-outline-primary:not(.input-group .btn):hover, .ae-toolbar .btn.btn-outline-primary:not(.input-group .btn):hover, .file-header .btn.btn-outline-primary:not(.input-group .btn):hover {
    background-color: var(--bs-primary) !important;
    color: white !important;
    box-shadow: 0 4px 10px rgba(var(--bs-primary-rgb), 0.3) !important; /* Enhanced shadow */
}

/* End of toolbar unification section */

/* ====================================
   INPUT-GROUP BUTTON STYLING OVERRIDE
   Ensure buttons in input-group have proper Bootstrap styling
   These rules must come AFTER toolbar rules to override them
   ==================================== */

/* Force proper styling for ALL buttons in input-group - override toolbar styles */
.input-group > .btn,
.input-group > .btn-group > .btn,
.input-group > .dropdown > .btn {
    border: 1px solid rgba(0,0,0,0.12) !important;
    border-radius: 0 !important;
    background-color: #f8f9fa !important;
    color: #212529 !important;
    padding: 0.375rem 0.75rem !important;
    font-size: 1rem !important;
    font-weight: 400 !important;
    letter-spacing: normal !important;
}

/* First child button */
.input-group > .btn:first-child,
.input-group > .input-group-text + .btn,
.input-group > .btn-group:first-child > .btn:first-child {
    border-top-left-radius: 5px !important;
    border-bottom-left-radius: 5px !important;
    border-top-right-radius: 0 !important;
    border-bottom-right-radius: 0 !important;
}

/* Last child button - this is the critical one! */
.input-group > .btn:last-child,
.input-group > .btn-group:last-child > .btn:last-child,
.input-group > .btn-group:last-child > .dropdown-toggle,
.input-group > .dropdown:last-child > .btn,
.input-group > .btn.dropdown-toggle:last-child,
body .input-group > .btn:last-child,
body .input-group > .btn-group:last-child > .btn:last-child,
body .input-group > .btn-group:last-child > .dropdown-toggle {
    border-top-right-radius: 5px !important;
    border-bottom-right-radius: 5px !important;
    border-top-left-radius: 0 !important;
    border-bottom-left-radius: 0 !important;
}

/* Middle buttons */
.input-group > .btn:not(:first-child):not(:last-child),
.input-group > .btn-group:not(:first-child):not(:last-child) > .btn {
    border-radius: 0 !important;
}

/* Fix split button in input-group */
.input-group > .btn-group:last-child > .btn:first-child {
    border-top-right-radius: 0 !important;
    border-bottom-right-radius: 0 !important;
    border-right-width: 0 !important;
}

/* RTL Support */
[dir="rtl"] .input-group > .btn:first-child,
[dir="rtl"] .input-group > .input-group-text + .btn,
[dir="rtl"] .input-group > .btn-group:first-child > .btn:first-child {
    border-top-left-radius: 0 !important;
    border-bottom-left-radius: 0 !important;
    border-top-right-radius: 5px !important;
    border-bottom-right-radius: 5px !important;
}

[dir="rtl"] .input-group > .btn:last-child,
[dir="rtl"] .input-group > .btn-group:last-child > .btn:last-child,
[dir="rtl"] .input-group > .btn-group:last-child > .dropdown-toggle,
[dir="rtl"] .input-group > .dropdown:last-child > .btn {
    border-top-right-radius: 0 !important;
    border-bottom-right-radius: 0 !important;
    border-top-left-radius: 5px !important;
    border-bottom-left-radius: 5px !important;
}

[dir="rtl"] .input-group > .btn-group:last-child > .btn:first-child {
    border-top-left-radius: 0 !important;
    border-bottom-left-radius: 0 !important;
    border-left-width: 0 !important;
}

/* Hide dropdown caret in input-group */
.input-group .dropdown-toggle::after,
.input-group > .btn-group .dropdown-toggle::after {
    display: none !important;
}

/* Hover state for input-group buttons */
.input-group > .btn:hover,
.input-group > .btn-group > .btn:hover {
    background-color: #e9ecef !important;
    border-color: rgba(0,0,0,0.18) !important;
}

/* End of input-group button styling */

/* ====================================
   OPERATOR BUTTON FIX (for search forms)
   Specific styling for operator dropdown buttons in input-groups
   ==================================== */

/* Force proper styling for operator buttons */
.input-group > .operator-btn,
.input-group-sm > .operator-btn,
button.operator-btn.dropdown-toggle {
    border: 1px solid rgb(233, 233, 233, 0.24) !important;
    background-color: #f8f9fa !important;
    color: #6c757d !important;
    padding: 0.25rem 0.5rem !important;
    font-size: 0.875rem !important;
    font-weight: 400 !important;
    letter-spacing: normal !important;
}

/* RTL support for operator buttons */
[dir="rtl"] .input-group > .operator-btn,
[dir="rtl"] .input-group-sm > .operator-btn {
    border-top-right-radius: 0 !important;
    border-bottom-right-radius: 0 !important;
    border-top-left-radius: 5px !important;
    border-bottom-left-radius: 5px !important;
}

/* Hover state for operator buttons */
.input-group > .operator-btn:hover,
.input-group-sm > .operator-btn:hover {
    background-color: #e9ecef !important;
}

/* Hide caret from operator buttons */
.operator-btn.dropdown-toggle::after {
    display: none !important;
}

/* End of operator button styling */

/* ====================================
   BTN-GROUP-SM STYLING
   Make small button groups slightly thinner
   ==================================== */

.btn-group-sm > .btn,
.btn-group-sm > .btn-group > .btn {
    padding-top: 0.25rem !important;
    padding-bottom: 0.25rem !important;
    padding-left: calc(0.5rem - 1px) !important;
    padding-right: calc(0.5rem - 1px) !important;
}

/* ====================================
   HSTACK STANDARDIZATION
   Ensure all .hstack containers look/behave consistently.
   No per-component styling should be needed.
   ==================================== */

.hstack { gap: .5rem; }

/* ====================================
   BOOTSTRAP SPLIT DROPDOWN BUTTON FIX
   Make the caret button sit flush and match the main button
   ==================================== */

/* Remove the visual gap (double border) between the main button and caret button */
.btn-group > .btn + .dropdown-toggle.dropdown-toggle-split,
.btn-group > .btn + .btn.dropdown-toggle.dropdown-toggle-split {
    margin-left: -1px;
}

/* Keep caret button compact but clickable */
.btn-group > .dropdown-toggle.dropdown-toggle-split {
    padding-left: .55rem !important;
    padding-right: .55rem !important;
}

/* Ensure adjacent border radii look like a single control */
.btn-group > .btn + .dropdown-toggle.dropdown-toggle-split {
    border-top-left-radius: 0 !important;
    border-bottom-left-radius: 0 !important;
}

.btn-group > .btn:first-child {
    border-top-right-radius: 0 !important;
    border-bottom-right-radius: 0 !important;
}

/* Match split caret colors with the preceding outline button */
.btn-group > .btn.btn-outline-primary + .dropdown-toggle.dropdown-toggle-split {
    border-color: var(--bs-primary) !important;
    color: var(--bs-primary) !important;
}
.btn-group > .btn.btn-outline-secondary + .dropdown-toggle.dropdown-toggle-split {
    border-color: #e2e8f0 !important;
    color: #64748b !important;
}
.btn-group > .btn.btn-outline-success + .dropdown-toggle.dropdown-toggle-split {
    border-color: var(--color-success, var(--bs-success)) !important;
    color: var(--color-success, var(--bs-success)) !important;
}
.btn-group > .btn.btn-outline-danger + .dropdown-toggle.dropdown-toggle-split {
    border-color: var(--color-danger, var(--bs-danger)) !important;
    color: var(--color-danger, var(--bs-danger)) !important;
}
.btn-group > .btn.btn-outline-warning + .dropdown-toggle.dropdown-toggle-split {
    border-color: var(--color-warning, var(--bs-warning)) !important;
    color: var(--color-warning, var(--bs-warning)) !important;
}

.btn-group > .btn.btn-outline-primary + .dropdown-toggle.dropdown-toggle-split:hover,
.btn-group > .btn.btn-outline-primary + .dropdown-toggle.dropdown-toggle-split:focus,
.btn-group > .btn.btn-outline-primary + .dropdown-toggle.dropdown-toggle-split:active,
.btn-group > .btn.btn-outline-primary + .dropdown-toggle.dropdown-toggle-split.show {
    background-color: rgba(var(--bs-primary-rgb), 0.08) !important;
}

.btn-group > .btn.btn-outline-secondary + .dropdown-toggle.dropdown-toggle-split:hover,
.btn-group > .btn.btn-outline-secondary + .dropdown-toggle.dropdown-toggle-split:focus,
.btn-group > .btn.btn-outline-secondary + .dropdown-toggle.dropdown-toggle-split:active,
.btn_group > .btn.btn-outline-secondary + .dropdown-toggle.dropdown-toggle-split.show {
    background-color: #f1f5f9 !important;
}

.btn-group > .btn.btn-outline-success + .dropdown-toggle.dropdown-toggle-split:hover,
.btn-group > .btn.btn-outline-success + .dropdown-toggle.dropdown-toggle-split:focus,
.btn-group > .btn.btn-outline-success + .dropdown-toggle.dropdown-toggle-split:active,
.btn-group > .btn.btn-outline-success + .dropdown-toggle.dropdown-toggle-split.show {
    background-color: rgba(16, 185, 129, 0.10) !important;
}

.btn-group > .btn.btn-outline-danger + .dropdown-toggle.dropdown-toggle-split:hover,
.btn_group > .btn.btn-outline-danger + .dropdown-toggle.dropdown-toggle-split:focus,
.btn-group > .btn.btn-outline-danger + .dropdown-toggle.dropdown-toggle-split:active,
.btn_group > .btn.btn-outline-danger + .dropdown-toggle.dropdown-toggle-split.show {
    background-color: rgba(239, 68, 68, 0.10) !important;
}

.btn-group > .btn.btn-outline-warning + .dropdown-toggle.dropdown-toggle-split:hover,
.btn_group > .btn.btn-outline-warning + .dropdown-toggle.dropdown-toggle-split:focus,
.btn-group > .btn.btn-outline-warning + .dropdown-toggle.dropdown-toggle-split:active,
.btn_group > .btn.btn-outline-warning + .dropdown-toggle.dropdown-toggle-split.show {
    background-color: rgba(245, 158, 11, 0.12) !important;
}

/* ====================================
   LOGO RAINBOW ANIMATION
   Rotating rainbow border & glow for the main logo
   ==================================== */

.logo-rainbow-wrapper {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 46px;
    height: 46px;
    border-radius: 50%;
    background: conic-gradient(
        from var(--logo-rainbow-angle, 0deg),
        #ff0080, #ff8c00, #ffe600, #40e0d0, #00bfff, #9370db, #ff1493, #ff0080
    );
    animation: logo-rainbow-spin 8s linear infinite;
    cursor: pointer;
}

.logo-rainbow-wrapper::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 50%;
    background: conic-gradient(
        from var(--logo-rainbow-angle, 0deg),
        #ff0080, #ff8c00, #ffe600, #40e0d0, #00bfff, #9370db, #ff1493, #ff0080
    );
    filter: blur(8px);
    opacity: 0.55;
    z-index: -1;
    animation: logo-rainbow-spin 8s linear infinite;
}

.logo-rainbow-wrapper::after {
    content: '';
    position: absolute;
    inset: 3px;
    border-radius: 50%;
    background: var(--bg-frame-color, #ffffff);
    z-index: 0;
}

.logo-rainbow-wrapper img {
    position: relative;
    z-index: 1;
    border-radius: 50%;
    width: 38px;
    height: 38px;
    display: block;
}

.logo-rainbow-wrapper:hover {
    animation-duration: 3s;
}

.logo-rainbow-wrapper:hover::before {
    opacity: 0.8;
    filter: blur(12px);
    animation-duration: 3s;
}

@property --logo-rainbow-angle {
    syntax: "<angle>";
    initial-value: 0deg;
    inherits: false;
}

@keyframes logo-rainbow-spin {
    to {
        --logo-rainbow-angle: 360deg;
    }
}

/* Toolbars: ensure
