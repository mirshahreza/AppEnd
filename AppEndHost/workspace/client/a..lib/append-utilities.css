/* ====================================
   UTILITY CLASSES
   Reusable utility classes for common styling needs
   ==================================== */

/* Color Utilities */
.text-primary { color: var(--bs-primary) !important; }
.text-muted { color: var(--color-text-muted) !important; }
.text-success { color: var(--color-success) !important; }
.text-danger { color: var(--color-danger) !important; }
.text-warning { color: var(--color-warning) !important; }
.text-inverse { color: var(--color-text-inverse) !important; }

/* Background Utilities */
.bg-primary { background-color: var(--bs-primary) !important; color: var(--color-text-inverse) !important; }
.bg-primary-subtle { background-color: var(--bs-primary-subtle-light) !important; }
.bg-primary-subtle-light { background-color: var(--bs-primary-subtle-light) !important; }
.bg-success { background-color: var(--color-success) !important; color: var(--color-text-inverse) !important; }
.bg-success-subtle { background-color: var(--color-success-subtle) !important; }
.bg-danger { background-color: var(--color-danger) !important; color: var(--color-text-inverse) !important; }
.bg-danger-subtle { background-color: var(--color-danger-subtle) !important; }
.bg-warning { background-color: var(--color-warning) !important; color: var(--color-text-inverse) !important; }
.bg-warning-subtle { background-color: var(--color-warning-subtle) !important; }
.bg-body { background-color: var(--color-bg) !important; }
.bg-body-subtle { background-color: var(--color-bg-subtle) !important; }
.bg-elevated { background-color: var(--color-bg-elevated) !important; }
.bg-neutral-header { background-color: var(--color-bg-subtle) !important; }
.bg-page { background-color: var(--color-bg); }
.bg-content { background-image: var(--bg-content); background-size: cover; }
.bg-login { background-image: var(--bg-login); background-size: cover; }
.bg-content-color { background-color: var(--theme-color); }
.bg-frame { background-color: var(--bg-frame-color); }

/* Border Utilities */
.border-primary { border-color: var(--color-border) !important; }
.border-accent { border-color: var(--color-accent) !important; }

/* Button Utilities */
.btn-primary {
    background-color: var(--color-accent) !important;
    color: var(--color-text-inverse) !important;
    border-color: var(--color-accent) !important;
}
.btn-primary:hover { background-color: var(--color-accent-hover) !important; }
.btn-xs { font-size: 0.65rem !important; }

/* Font Size Utilities */
.fs-1d1 { font-size: 1.1em !important; }
.fs-1d2 { font-size: 1.2em !important; }
.fs-1d3 { font-size: 1.3em !important; }
.fs-1d4 { font-size: 1.4em !important; }
.fs-1d5 { font-size: 1.5em !important; }
.fs-d9 { font-size: .9em !important; }
.fs-d8 { font-size: .8em !important; }
.fs-d7 { font-size: .7em !important; }
.fs-d6 { font-size: .6em !important; }
.fs-d5 { font-size: .5em !important; }
.fs-d4 { font-size: .4em !important; }
.fs-d35 { font-size: .35em !important; }
.fs-d3 { font-size: .3em !important; }
.fs-d2 { font-size: .2em !important; }

/* Hover Effects */
.hover-primary:hover {
    color: var(--color-accent) !important;
    background: rgba(var(--bs-primary-rgb), 0.06) !important;
}
.text-hover-danger:hover { color: var(--color-danger) !important; }
.text-hover-primary:hover { color: var(--color-accent) !important; }
.text-hover-success:hover { color: var(--color-success) !important; }
.text-hover-dark:hover { color: var(--fluent-neutral-900) !important; }

.bg-hover { opacity: 0.6; }
.bg-hover:hover {
    background-color: var(--color-accent-subtle) !important;
    color: var(--color-accent) !important;
    opacity: 0.99;
}
.bg-hover-light:hover { background-color: var(--color-accent-subtle) !important; }
.bg-hover-primary:hover { background-color: var(--fluent-primary-100) !important; }

/* Layout Utilities */
.scrollable {
    height: 100%;
    overflow-y: visible;
    overflow-x: hidden;
}

.fill {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    top: 0;
}

.vertical-center {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateX(-50%) translateY(-50%);
}

/* Interaction Utilities */
.pointer { cursor: pointer; }
.cursor-pointer { cursor: pointer; }

.disabled {
    cursor: auto !important;
    background-color: var(--fluent-neutral-200) !important;
}

.editmode {
    outline: 2px dashed rgba(0, 0, 0, 0.2) !important;
}

/* Effect Utilities */
.shadow5 {
    text-shadow: 0px 0px 10px rgba(100, 100, 100, 0.75);
}

.ico-shadow {
    box-shadow: rgba(50, 50, 93, 0.6) 0px 2px 5px -1px, rgba(0, 0, 0, 0.2) 0px 1px 5px -1px;
}

.hover-slow {
    transition: all 0.5s;
}

/* Gradient Text */
.ae-text-gradient-primary {
    background: linear-gradient(135deg, #6366f1 0%, #a78bfa 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.ae-text-gradient-accent {
    background: linear-gradient(135deg, #ff8a4c 0%, #ff6b9d 50%, #c06bf1 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

/* Responsive Utilities */
@media (min-width: 768px) {
    .content-bg {
        box-shadow: rgba(50, 50, 93, 0.6) 0px 2px 5px -1px, rgba(0, 0, 0, 0.2) 0px 1px 5px -1px;
    }
}

/* ====================================
   TOOLBAR UNIFICATION
   Make all header/toolbar areas identical in appearance and behavior
   Targets: .card-header, .designer-header, .host-toolbar, .ae-toolbar, .file-header
   ==================================== */

/* Unified toolbar container */
.card-header,
.designer-header,
.host-toolbar,
.ae-toolbar,
.file-header,
.card-header.bg-frame,
.designer-header.p-2,
.card-footer {
    background-color: var(--bg-toolbar-color) !important;
    color: var(--color-text) !important;
    min-height: 46px; /* less "fat" */
    padding: .35rem .75rem !important;
    display: flex !important;
    align-items: center !important;
    gap: .5rem !important;
    box-sizing: border-box !important;
    border-bottom: 1px solid rgba(var(--bs-primary-rgb), 0.06) !important;
}

/* Ensure internal hstack / flex rows span full width */
.card-header .hstack,
.designer-header .hstack,
.host-toolbar .hstack,
.file-header .hstack,
.card-footer .hstack {
    width: 100%;
    display: flex;
    align-items: center;
}

/* Toolbar buttons unified appearance */
.card-header .btn,
.card-header .btn-link,
.designer-header .btn,
.designer-header .btn-link,
.host-toolbar-btn,
.host-toolbar .btn,
.ae-toolbar .btn,
.file-header .btn,
.card-footer .btn,
.btn-group .btn {
    padding: .32rem .5rem !important;
    font-size: .92rem !important;
    border-radius: .375rem !important;
    background: transparent !important;
    border: 0 !important;
    display: inline-flex !important;
    align-items: center !important;
    gap: .4rem !important;
    box-shadow: none !important;
    transform: none !important;
    transition: background-color .12s ease, color .12s ease !important;

    /* default toolbar action color follows current theme (strongest accent) */
    color: var(--bs-primary) !important;
}

/* Ensure icons follow the same default theme color (unless they explicitly use text-success/text-danger/...) */
.card-header .btn i,
.card-header .btn-link i,
.designer-header .btn i,
.designer-header .btn-link i,
.host-toolbar-btn i,
.host-toolbar .btn i,
.ae-toolbar .btn i,
.file-header .btn i,
.card-footer .btn i {
    color: currentColor !important;
}

/* Keep toolbar labels/buttons/titles using theme primary (strongest) */
.card-header .btn span,
.card-header .btn-link span,
.card-header .fw-bold,
.designer-header .fw-bold,
.host-toolbar .fw-bold,
.file-header .fw-bold,
.card-footer .fw-bold {
    color: var(--bs-primary) !important;
}

/* Exception: if an element explicitly declares a semantic text color, respect it */
.card-header .btn.text-success,
.card-header .btn-link.text-success,
.designer-header .btn.text-success,
.designer-header .btn-link.text-success,
.host-toolbar-btn.text-success,
.host-toolbar .btn.text-success,
.ae-toolbar .btn.text-success,
.file-header .btn.text-success,
.card-footer .btn.text-success {
    color: var(--color-success) !important;
}
.card-header .btn.text-danger,
.card-header .btn-link.text-danger,
.designer-header .btn.text-danger,
.designer-header .btn-link.text-danger,
.host-toolbar-btn.text-danger,
.host-toolbar .btn.text-danger,
.ae-toolbar .btn.text-danger,
.file-header .btn.text-danger,
.card-footer .btn.text-danger {
    color: var(--color-danger) !important;
}
.card-header .btn.text-warning,
.card-header .btn-link.text-warning,
.designer-header .btn.text-warning,
.designer-header .btn-link.text-warning,
.host-toolbar-btn.text-warning,
.host-toolbar .btn.text-warning,
.ae-toolbar .btn.text-warning,
.file-header .btn.text-warning,
.card-footer .btn.text-warning {
    color: var(--color-warning) !important;
}

/* Hover / focus states — keep subtle; NO bold, NO icon color change */
.card-header .btn:hover,
.card-header .btn:focus,
.designer-header .btn:hover,
.designer-header .btn:focus,
.host-toolbar-btn:hover,
.host-toolbar-btn:focus,
.ae-toolbar .btn:hover,
.ae-toolbar .btn:focus,
.file-header .btn:hover,
.file-header .btn:focus,
.card-footer .btn:hover,
.card-footer .btn:focus,
.btn-group .btn:hover,
.btn-group .btn:focus {
    background-color: rgba(var(--bs-primary-rgb), 0.06) !important;
    /* do not override color */
    box-shadow: none !important;
    transform: none !important;
}

/* Prevent icons inside toolbar buttons from changing on hover/focus */
.card-header .btn:hover i,
.card-header .btn:focus i,
.card-header .btn-link:hover i,
.card-header .btn-link:focus i,
.designer-header .btn:hover i,
.designer-header .btn:focus i,
.host-toolbar .btn:hover i,
.host-toolbar .btn:focus i,
.host-toolbar-btn:hover i,
.host-toolbar-btn:focus i,
.ae-toolbar .btn:hover i,
.ae-toolbar .btn:focus i,
.file-header .btn:hover i,
.file-header .btn:focus i,
.card-footer .btn:hover i,
.card-footer .btn:focus i,
.btn-group .btn:hover i,
.btn-group .btn:focus i {
    /* do not override color */
    text-shadow: none !important;
    filter: none !important;
}


/* Responsive: tighten further on small screens */
@media (max-width: 767.98px) {
    .card-header,
    .designer-header,
    .host-toolbar,
    .file-header,
    .card-footer {
        padding: .30rem .5rem !important;
        min-height: 42px;
    }
    .card-header .btn,
    .designer-header .btn,
    .host-toolbar-btn,
    .card-footer .btn {
        padding: .26rem .4rem !important;
        font-size: .88rem !important;
    }
}

/* Explicitly remove any pseudo-element tooltips that were injected previously */
.card-header .btn::after,
.card-header .btn-link::after,
.designer-header .btn::after,
.host-toolbar-btn::after,
.ae-toolbar .btn::after,
.file-header .btn::after,
.card-footer .btn::after {
    display: none !important;
    content: none !important;
}

/* ====================================
   RESTORE & BEAUTIFY BOOTSTRAP BUTTONS IN TOOLBARS
   Override the toolbar unification rules for standard Bootstrap buttons
   ==================================== */

/* Common Styles for Toolbar Buttons */
.card-header .btn, .card-footer .btn, .btn-group .btn,
.designer-header .btn, .host-toolbar .btn, .ae-toolbar .btn, .file-header .btn {
    border-radius: 6px !important; /* Reduced from 8px to 6px */
    font-weight: 500 !important;
    letter-spacing: 0.3px;
    padding: 0.4rem 1rem !important; /* Slightly more padding */
}

/* Primary Buttons */
.card-header .btn.btn-primary, .card-footer .btn.btn-primary, .btn-group .btn.btn-primary,
.designer-header .btn.btn-primary, .host-toolbar .btn.btn-primary, .ae-toolbar .btn.btn-primary, .file-header .btn.btn-primary {
    background: linear-gradient(145deg, var(--bs-primary) 0%, var(--bs-primary-dark) 100%) !important;
    border: none !important;
    color: white !important;
    box-shadow: 0 2px 5px rgba(var(--bs-primary-rgb), 0.3) !important;
    transition: all 0.2s ease !important;
}

.card-header .btn.btn-primary:hover, .card-footer .btn.btn-primary:hover, .btn-group .btn.btn-primary:hover,
.designer-header .btn.btn-primary:hover, .host-toolbar .btn.btn-primary:hover, .ae-toolbar .btn.btn-primary:hover, .file-header .btn.btn-primary:hover {
    box-shadow: 0 4px 12px rgba(var(--bs-primary-rgb), 0.5) !important; /* Enhanced shadow */
    filter: brightness(1.1); /* Increased brightness */
}

/* Secondary Buttons */
.card-header .btn.btn-secondary, .card-footer .btn.btn-secondary, .btn-group .btn.btn-secondary,
.designer-header .btn.btn-secondary, .host-toolbar .btn.btn-secondary, .ae-toolbar .btn.btn-secondary, .file-header .btn.btn-secondary {
    background: linear-gradient(145deg, #6c757d 0%, #5a6268 100%) !important;
    border: none !important;
    color: white !important;
    box-shadow: 0 2px 5px rgba(108, 117, 125, 0.3) !important;
}

.card-header .btn.btn-secondary:hover, .card-footer .btn.btn-secondary:hover, .btn-group .btn.btn-secondary:hover,
.designer-header .btn.btn-secondary:hover, .host-toolbar .btn.btn-secondary:hover, .ae-toolbar .btn.btn-secondary:hover, .file-header .btn.btn-secondary:hover {
    box-shadow: 0 4px 12px rgba(108, 117, 125, 0.5) !important; /* Enhanced shadow */
    filter: brightness(1.1); /* Increased brightness */
}

/* Success Buttons */
.card-header .btn.btn-success, .card-footer .btn.btn-success, .btn-group .btn.btn-success,
.designer-header .btn.btn-success, .host-toolbar .btn.btn-success, .ae-toolbar .btn.btn-success, .file-header .btn.btn-success {
    background: linear-gradient(145deg, var(--fluent-success-500) 0%, var(--fluent-success-600) 100%) !important;
    border: none !important;
    color: white !important;
    box-shadow: 0 2px 5px rgba(16, 185, 129, 0.3) !important;
}

.card-header .btn.btn-success:hover, .card-footer .btn.btn-success:hover, .btn-group .btn.btn-success:hover,
.designer-header .btn.btn-success:hover, .host-toolbar .btn.btn-success:hover, .ae-toolbar .btn.btn-success:hover, .file-header .btn.btn-success:hover {
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.5) !important; /* Enhanced shadow */
    filter: brightness(1.1); /* Increased brightness */
}

/* Danger Buttons */
.card-header .btn.btn-danger, .card-footer .btn.btn-danger, .btn-group .btn.btn-danger,
.designer-header .btn.btn-danger, .host-toolbar .btn.btn-danger, .ae-toolbar .btn.btn-danger, .file-header .btn.btn-danger {
    background: linear-gradient(145deg, var(--fluent-danger-500) 0%, var(--fluent-danger-600) 100%) !important;
    border: none !important;
    color: white !important;
    box-shadow: 0 2px 5px rgba(239, 68, 68, 0.3) !important;
}

.card-header .btn.btn-danger:hover, .card-footer .btn.btn-danger:hover, .btn-group .btn.btn-danger:hover,
.designer-header .btn.btn-danger:hover, .host-toolbar .btn.btn-danger:hover, .ae-toolbar .btn.btn-danger:hover, .file-header .btn.btn-danger:hover {
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.5) !important; /* Enhanced shadow */
    filter: brightness(1.1); /* Increased brightness */
}

/* Warning Buttons */
.card-header .btn.btn-warning, .card-footer .btn.btn-warning, .btn-group .btn.btn-warning,
.designer-header .btn.btn-warning, .host-toolbar .btn.btn-warning, .ae-toolbar .btn.btn-warning, .file-header .btn.btn-warning {
    background: linear-gradient(145deg, var(--fluent-warning-400) 0%, var(--fluent-warning-500) 100%) !important;
    border: none !important;
    color: #000 !important;
    box-shadow: 0 2px 5px rgba(245, 158, 11, 0.3) !important;
}

.card-header .btn.btn-warning:hover, .card-footer .btn.btn-warning:hover, .btn-group .btn.btn-warning:hover,
.designer-header .btn.btn-warning:hover, .host-toolbar .btn.btn-warning:hover, .ae-toolbar .btn.btn-warning:hover, .file-header .btn.btn-warning:hover {
    box-shadow: 0 4px 12px rgba(245, 158, 11, 0.5) !important; /* Enhanced shadow */
    filter: brightness(1.1); /* Increased brightness */
}

/* Outline Secondary Buttons (Cancel) */
.card-header .btn.btn-outline-secondary, .card-footer .btn.btn-outline-secondary, .btn-group .btn.btn-outline-secondary,
.designer-header .btn.btn-outline-secondary, .host-toolbar .btn.btn-outline-secondary, .ae-toolbar .btn.btn-outline-secondary, .file-header .btn.btn-outline-secondary {
    background-color: white !important;
    border: 1px solid #e2e8f0 !important;
    color: #64748b !important;
    box-shadow: 0 1px 2px rgba(0,0,0,0.05) !important;
    transition: all 0.2s ease !important;
}

.card-header .btn.btn-outline-secondary:hover, .card-footer .btn.btn-outline-secondary:hover, .btn-group .btn.btn-outline-secondary:hover,
.designer-header .btn.btn-outline-secondary:hover, .host-toolbar .btn.btn-outline-secondary:hover, .ae-toolbar .btn.btn-outline-secondary:hover, .file-header .btn.btn-outline-secondary:hover {
    background-color: #f1f5f9 !important; /* Slightly darker hover bg */
    border-color: #cbd5e1 !important;
    color: #1e293b !important; /* Darker text */
    box-shadow: 0 2px 8px rgba(0,0,0,0.08) !important; /* Enhanced shadow */
}

/* Outline Primary Buttons */
.card-header .btn.btn-outline-primary, .card-footer .btn.btn-outline-primary, .btn-group .btn.btn-outline-primary,
.designer-header .btn.btn-outline-primary, .host-toolbar .btn.btn-outline-primary, .ae-toolbar .btn.btn-outline-primary, .file-header .btn.btn-outline-primary {
    background-color: white !important;
    border: 1px solid var(--bs-primary) !important;
    color: var(--bs-primary) !important;
    box-shadow: 0 1px 2px rgba(var(--bs-primary-rgb), 0.1) !important;
}

.card-header .btn.btn-outline-primary:hover, .card-footer .btn.btn-outline-primary:hover, .btn-group .btn.btn-outline-primary:hover,
.designer-header .btn.btn-outline-primary:hover, .host-toolbar .btn.btn-outline-primary:hover, .ae-toolbar .btn.btn-outline-primary:hover, .file-header .btn.btn-outline-primary:hover {
    background-color: var(--bs-primary) !important;
    color: white !important;
    box-shadow: 0 4px 10px rgba(var(--bs-primary-rgb), 0.3) !important; /* Enhanced shadow */
}

/* End of toolbar unification section */

/* ====================================
   HSTACK STANDARDIZATION
   Ensure all .hstack containers look/behave consistently.
   No per-component styling should be needed.
   ==================================== */

.hstack { gap: .5rem; }
/* Toolbars: ensure
